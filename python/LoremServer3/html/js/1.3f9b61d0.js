(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{2964:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-layout",{attrs:{view:"lHh Lpr lFf"}},[i("q-header",{staticStyle:{background:"linear-gradient(145deg,#1976d2 11%,#0f477e 75%)"},attrs:{elevated:""}},[i("q-toolbar",[i("q-ajax-bar",{ref:"bar",attrs:{position:"top",color:"blue-3",size:"3px"}}),e.isLogin?i("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"menu"},on:{click:function(t){e.drawer=!e.drawer}}}):e._e(),i("q-toolbar-title",{attrs:{shrink:""}},[i("span",{staticClass:"flex inline items-center"},[e._v("\n           \n          "),i("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(this.$route.meta.name))])])]),i("q-toolbar-title",[i("div",{staticClass:"text-center xs-hide"},[i("q-btn",{attrs:{flat:"",size:"20px","no-caps":"",padding:"5px 15px"},on:{click:e.goHome}},[i("span",{staticClass:"flex row flex-center"},[i("img",{staticClass:"logo-img",attrs:{alt:"LoremSurvey",src:a("e226")}}),i("span",{staticClass:"version ellipsis gt-sm"},[e._v("     "+e._s(e.ver))])])])],1)]),i("q-btn-dropdown",{attrs:{"no-caps":"",icon:"account_circle",flat:"",size:"15px",padding:"12px"}},[i("template",{slot:"label"},[i("div",{staticClass:"q-ml-sm gt-xs"},[e._v("\n              "+e._s(e.isLogin?e.userName:"未登录")+"\n            ")])]),i("q-list",[e.isLogin?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"xs"},[i("q-item-section",[i("q-item-label",[e._v(e._s(e.userName))])],1)],1):e._e(),e.isLogin?e._e():i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routeTo("/login")}}},[i("q-item-section",[i("q-item-label",[e._v("登录")])],1)],1),e.isLogin?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.onLogout}},[i("q-item-section",[i("q-item-label",[e._v("注销")])],1)],1):e._e(),e.isLogin?e._e():i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routeTo("/register")}}},[i("q-item-section",[i("q-item-label",[e._v("注册")])],1)],1),e.isLogin?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.routeTo("/manage/user")}}},[i("q-item-section",[i("q-item-label",[e._v("个人中心")])],1)],1):e._e()],1)],2)],1)],1),e.isLogin?i("q-drawer",{attrs:{elevated:"",width:300,breakpoint:400},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[i("q-scroll-area",{staticStyle:{height:"400px","margin-top":"150px","border-right":"1px solid #ddd"}},[i("q-list",{attrs:{padding:""}},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.routeTo("/")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"home"}})],1),i("q-item-section",[e._v("\n              主页\n            ")])],1),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.routeTo("/manage")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"star"}})],1),i("q-item-section",[e._v("\n              问卷管理\n            ")])],1),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.routeTo("/manage/respondents")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"send"}})],1),i("q-item-section",[e._v("\n              受访者管理\n            ")])],1),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.routeTo("/manage/user")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"account_circle"}})],1),i("q-item-section",[e._v("\n              个人中心\n            ")])],1)],1)],1),i("div",{staticClass:"fixed-bottom version-area"},[i("div",{staticClass:"text-h6 text-primary"},[e._v("LoremSurvey")]),i("div",{staticClass:"text-grey text-bold"},[e._v(" "+e._s(e.ver))])]),i("q-img",{staticClass:"absolute-top",staticStyle:{height:"150px"},attrs:{src:"https://cdn.quasar.dev/img/material.png"}},[i("div",{staticClass:"absolute-bottom bg-transparent flex column flex-center"},[i("q-icon",{staticClass:"q-mb-sm",attrs:{size:"56px",name:"account_circle"}}),i("div",{staticClass:"text-h6"},[e._v(e._s(e.isLogin?e.userName:"未登录"))]),e.isLogin?i("div",{staticClass:"text-h7"},[e._v("管理员")]):i("q-btn",{attrs:{dense:"",flat:""},on:{click:function(t){e.routeTo("login"),e.drawer=!1}}},[e._v("登录")])],1)])],1):e._e(),i("q-page-container",{staticClass:"column"},[i("router-view")],1)],1)},o=[],s=a("4ec3"),r={name:"MasterLayout",data(){return{isLogin:!0,userName:null,drawer:!1,ver:"v2.5 开发版本"}},updated(){this.$cookies.isKey("username")?(this.userName=this.$cookies.get("username"),this.isLogin=!0):this.isLogin=!1},created(){this.$cookies.isKey("username")?(this.userName=this.$cookies.get("username"),this.isLogin=!0):this.isLogin=!1},methods:{goHome(){this.isLogin&&"/manage"!==this.$route.path?document.location.href="/manage":document.location.href=""},routeTo(e){this.$router.push(e),this.drawer=!1},onLogout(){this.$cookies.remove("username"),Object(s["g"])(),this.isLogin=!1,location.reload()}}},n=r,c=(a("efe4"),a("2877")),l=a("4d5a"),u=a("e359"),p=a("65c6"),m=a("7ea5"),d=a("9c40"),g=a("6ac5"),v=a("0016"),b=a("f20b"),h=a("1c1c"),f=a("66e5"),q=a("4074"),w=a("0170"),_=a("9404"),k=a("4983"),x=a("068f"),L=a("09e3"),C=a("7f67"),T=a("714f"),j=a("eebe"),N=a.n(j),Q=Object(c["a"])(n,i,o,!1,null,"5ea5ebc4",null);t["default"]=Q.exports;N()(Q,"components",{QLayout:l["a"],QHeader:u["a"],QToolbar:p["a"],QAjaxBar:m["a"],QBtn:d["a"],QToolbarTitle:g["a"],QIcon:v["a"],QBtnDropdown:b["a"],QList:h["a"],QItem:f["a"],QItemSection:q["a"],QItemLabel:w["a"],QDrawer:_["a"],QScrollArea:k["a"],QImg:x["a"],QPageContainer:L["a"]}),N()(Q,"directives",{ClosePopup:C["a"],Ripple:T["a"]})},"4ec3":function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"j",(function(){return s})),a.d(t,"f",(function(){return r})),a.d(t,"h",(function(){return n})),a.d(t,"g",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"a",(function(){return d}));var i=a("b775");const o=e=>Object(i["a"])({url:"/api/question/answer",method:"get",params:e}),s=(e,t)=>Object(i["a"])({url:"/api/question/answer",method:"post",params:e,data:t}),r=e=>Object(i["a"])({url:"/api/user/login",method:"post",data:e}),n=e=>Object(i["a"])({url:"/api/user/register",method:"post",data:e}),c=e=>Object(i["a"])({url:"/api/user/logout",method:"post",data:e}),l=e=>Object(i["a"])({url:"/api/user/getcaptcha",method:"get",data:e}),u=e=>Object(i["a"])({url:"/api/user/userinfo",method:"get",data:e}),p=e=>Object(i["a"])({url:"/api/user/userinfo",method:"put",data:e}),m=e=>Object(i["a"])({url:"/api/user/changepw",method:"post",data:e}),d=e=>Object(i["a"])({url:"/api/user/changepw",method:"put",data:e})},b775:function(e,t,a){"use strict";(function(e){var i=a("bc3a"),o=a.n(i),s=a("2a19");const r=o.a.create({baseURL:e.env.VUE_APP_BASE_API,timeout:99999,withCredentials:!0});r.interceptors.request.use((e=>{let t=(void 0).$cookies.get("csrftoken");return e.data=JSON.stringify(e.data),e.headers={"Content-Type":"application/json","X-CSRFToken":t},e}),(e=>(s["a"].create({message:e.toString(),color:"negative",position:"top",timeout:2e3,icon:"warning"}),e))),r.interceptors.response.use((e=>{switch(e.data.code){case 0:return e;case 1:return s["a"].create({message:e.data.message.toString(),color:"warning",position:"top",timeout:2e3}),setTimeout((()=>{document.cookie="username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",location.reload()}),500),e;case 2:return s["a"].create({message:e.data.message.toString(),color:"orange",position:"top",timeout:2e3}),e;case-1:return s["a"].create({message:"系统错误",color:"deep-orange-14",position:"top",timeout:2e3}),e;case 7:return s["a"].create({message:e.data.message.toString(),color:"warning",position:"top",timeout:2e3}),e;default:return e}}),(e=>(s["a"].create({message:e.toString(),color:"negative",position:"top",timeout:2e3,icon:"warning"}),e))),t["a"]=r}).call(this,a("4362"))},e226:function(e,t,a){e.exports=a.p+"img/text-logo.702d3839.svg"},efe4:function(e,t,a){"use strict";a("fb4a")},fb4a:function(e,t,a){}}]);